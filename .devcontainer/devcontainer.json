{
  "name": "Node.js & TypeScript",
  "image": "mcr.microsoft.com/devcontainers/typescript-node:4.0.5-22@sha256:8e9c836b0c0ec4f44812ca5e47dbac9f15e908e54cd934effd0483940cc2caba",
  "features": {
    "ghcr.io/devcontainers/features/github-cli:1.0.15": {},
    "ghcr.io/devcontainers-extra/features/pre-commit:2.0.18": {},
    "ghcr.io/devcontainers-extra/features/shellcheck:1.1.0": {},
    "ghcr.io/devcontainers-extra/features/uv:1.0.2": {},
    "ghcr.io/schlich/devcontainer-features/playwright:0.2.0": {
      "browsers": "chromium"
    }
  },
  "postCreateCommand": {
    "Enable corepack": "sudo corepack enable && corepack install -g yarn",
    "Initialize pre-commit environment": "nohup sh -c 'pre-commit install -f --install-hooks &' < /dev/null > /dev/null 2>&1",
    "Install npm tools": "npm install -g --no-fund @google/gemini-cli markdownlint-cli"
  },
  "waitFor": "onCreateCommand",
  "containerEnv": {
    // Ensure UV cache is on the same volume for fast access
    "UV_CACHE_DIR": "${containerWorkspaceFolder}/.uv_cache"
  },
  "mounts": [
    // Map in user's Gemini config from host
    "source=${localEnv:HOME}${localEnv:USERPROFILE}/.gemini,target=/home/node/.gemini,type=bind,consistency=cached"
  ],
  "customizations": {
    "vscode": {
      "extensions": [
        "bradlc.vscode-tailwindcss",
        "vitest.explorer",
        "dbaeumer.vscode-eslint",
        "ms-edgedevtools.vscode-edge-devtools",
        "ms-playwright.playwright",
        "GitHub.copilot",
        "GitHub.copilot-chat"
      ]
    }
  }
}
